var Manage={nTable:[],Initialize:function(){$('<a class="edit"></a>').insertBefore($("#result-wrapper > .wrapper > img")).bind("click",function(){if(Page.rIMDB.test(window.location.hash)){var e=screen.height-520;var t=1227;var n=(screen.width-t)/2;var r=window.open("/edit/"+window.location.hash.substr(1),"","directories=0,titlebar=0,toolbar=0,location=0,status=0,menubar=0,scrollbars=auto,resizable=no,width="+t+",height="+e+",left="+n+",top=90");r.focus()}})},LoadTable:function(e,t){Manage.nTable[e]=$(e).dataTable({bJQueryUI:false,bProcessing:false,bServerSide:true,bDestroy:true,bAutoWidth:false,sServerMethod:"POST",sAjaxSource:t,sPaginationType:"full_numbers",iDisplayLength:10,aoColumnDefs:[{bSortable:false,aTargets:["no-sort"]}],fnDrawCallback:function(){switch(t){case"/database":{$('<div class="btn-group"><a class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a><ul class="dropdown-menu"><li><a href="#" id="edit">Show Links</a></li><li><a href="#" id="remove">Delete</a></li></ul></div>').appendTo($("div.table-options"));$("div.table-options #edit").unbind("click").bind("click",function(){Manage.LoadTable("#table-links","/database?LID="+$(this).parent().parent().parent().parent().attr("id"));$("div.wrapper.entries").hide();$("div.wrapper.links").show();$("div.wrapper.links button#back").unbind("click").bind("click",function(){$("div.wrapper.links").hide();$("div.wrapper.entries").show()});$("div.wrapper.links button#remove").unbind("click").bind("click",function(){var e=[];if(confirm("Do you really want to delete the selected links?")){$.each($("div.wrapper.links #table-links input[type=checkbox]:checked"),function(){e.push(this.name)});$.ajax({type:"POST",url:"/database",dataType:"JSON",data:"r=link&data="+JSON.stringify(e),complete:function(e){Manage.nTable["#table-links"]._fnAjaxUpdate()}})}return false});return false});$("div.table-options #remove").unbind("click").bind("click",function(){if(confirm("Do you really want to delete the whole entry inclusive all links?")){$.ajax({type:"POST",url:"/database",dataType:"JSON",data:"r=entry&data="+$(this).parent().parent().parent().parent().attr("id"),complete:function(e){Manage.nTable["#table-entries"]._fnAjaxUpdate()}})}return false})}break;case"/releases":{$('table#table-pending thead th input[type="checkbox"]').bind("change",function(){$('table#table-pending tbody td input[type="checkbox"]').prop("checked",$('table#table-pending thead th input[type="checkbox"]').prop("checked"))})}break}}})}}